<ng-container *ngIf="(config.row$ | async) as rows">
  <mat-table class="MoyTable" [dataSource]="rows" multiTemplateDataRows [trackBy]="rowFn">
    <!-- Column Defs: [Arbitrary by input] -->
    <ng-container [matColumnDef]="column" *ngFor="let column of config.columns.all; trackBy: columnFn">
      <mat-header-cell *matHeaderCellDef>{{ column | titlecase }}</mat-header-cell>

      <mat-cell *matCellDef="let row; let index = dataIndex">
        <moy-input [config]="row.cellMap[column].content"></moy-input>
      </mat-cell>

      <mat-footer-cell *matFooterCellDef [attr.colspan]="config.columns.body.length">
        <mat-paginator
          hidePageSize="true"
          showFirstLastButtons="true"
          [length]="config.totalRows"
          [pageSize]="config.pageSize"
          (page)="config.setPage($event)">
        </mat-paginator>
      </mat-footer-cell>
    </ng-container>

    <!-- Row Defs: [header, row, footer, noData] -->
    <ng-container *ngIf="config.columns.headers">
      <mat-header-row *matHeaderRowDef="config.columns.headers; sticky: true"></mat-header-row>
    </ng-container>

    <mat-row *matRowDef="let row; let index = dataIndex; columns: config.columns.body"
      [ngClass]="{ pair: index % 2 === 0, 'not-pair': index % 2 !== 0 }">
    </mat-row>

    <ng-container *ngIf="config.columns.footers">
      <mat-footer-row *matFooterRowDef="config.columns.footers; sticky: true"></mat-footer-row>
    </ng-container>
  </mat-table>
</ng-container>
